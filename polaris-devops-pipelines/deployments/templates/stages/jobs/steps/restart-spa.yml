parameters:
  appInsightsKey: ""
  envLabel: ""
  envSuffix: ""
  azureSubscription: ""
  
steps:
#send custom event to AppInsights
- template: tasks/send-to-app-insights.yml
  parameters:
    appInsightsKey: "${{ parameters.appInsightsKey }}"
    message: "${{ parameters.envLabel }} UI Component Deployment: Restarting SPA - Started"
  
  # Restart app service - moved away from deployment to buy some time    
- task: AzureAppServiceManage@0
  displayName: 'Restart SPA Azure App Service'
  inputs:
    azureSubscription: "${{ parameters.azureSubscription }}"
    Action: 'Restart Azure App Service'
    WebAppName: "as-web-polaris${{ parameters.envSuffix }}"
  
  #send custom event to AppInsights
- template: tasks/send-to-app-insights.yml
  parameters:
    appInsightsKey: "${{ parameters.appInsightsKey }}"
    message: "${{ parameters.envLabel }} UI Component Deployment: Restarting SPA - Completed"